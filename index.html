<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Битва Команд в League of Legends</title>
    <!-- Firebase SDK -->
    <script>

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
        // Конфигурация Firebasea
       const firebaseConfig = {

    apiKey: "AIzaSyBxBRcFUjf0ijLWE8RS_Q0n-uND3bsvGew",

    authDomain: "lol-checklist-c069b.firebaseapp.com",

    projectId: "lol-checklist-c069b",

    storageBucket: "lol-checklist-c069b.appspot.com",

    messagingSenderId: "957462002192",

    appId: "1:957462002192:web:7a5f0f7eae9389a9b16895"

  };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app)

        const myCollection = collection(db, 'participant-table');

    // Get documents from the collection
    getDocs(myCollection).then(snapshot => {
    snapshot.docs.forEach(doc => {
        console.log(doc.data()); // Log the document data to the console
    });
    }).catch(error => {
    console.error("Error getting documents: ", error);
    });
    </script>
</head>
<body>
    <h1>Регистрация Команд для League of Legends</h1>
    <div>
        <h2>Команда 1</h2>
        <input type="text" id="player1-team1" placeholder="Игрок 1">
        <input type="text" id="player2-team1" placeholder="Игрок 2">
        <input type="text" id="player3-team1" placeholder="Игрок 3">
        <input type="text" id="player4-team1" placeholder="Игрок 4">
        <input type="text" id="player5-team1" placeholder="Игрок 5">
    </div>
    <div>
        <h2>Команда 2</h2>
        <input type="text" id="player6-team2" placeholder="Игрок 6">
        <input type="text" id="player7-team2" placeholder="Игрок 7">
        <input type="text" id="player8-team2" placeholder="Игрок 8">
        <input type="text" id="player9-team2" placeholder="Игрок 9">
        <input type="text" id="player10-team2" placeholder="Игрок 10">
    </div>
    <button id="submitTeams">Отправить</button>

<script>
    document.addEventListener("DOMContentLoaded", ()=>{
        var playersRef = firebase.database().ref('participant-table');

        // Чтение данных при загрузке страницы
        playersRef.once('value', function(snapshot) {
            snapshot.forEach(function(childSnapshot) {
                var childKey = childSnapshot.key; // 'player1', 'player2', etc.
                var childData = childSnapshot.val(); // 'Имя игрока'
                var playerNumber = childKey.match(/\d+/)[0]; // извлекаем номер из 'player1', 'player2', etc.
                var teamNumber = playerNumber <= 5 ? 'team1' : 'team2';
                document.getElementById(`player${playerNumber}-${teamNumber}`).value = childData;
            });
        });

        // Запись данных при нажатии на кнопку
        document.getElementById('submitTeams').addEventListener('click', function(e) {
            e.preventDefault();
            for (let i = 1; i <= 10; i++) {
                var playerRef = playersRef.child('player' + i);
                var teamNumber = i <= 5 ? 'team1' : 'team2';
                playerRef.set(document.getElementById(`player${i}-${teamNumber}`).value).catch(function(error) {
                    alert("Ошибка записи данных для игрока: " + error.message);
                });
            }
            alert('Данные обновлены');
        });
    } )
</script>
    
</body>
</html>
